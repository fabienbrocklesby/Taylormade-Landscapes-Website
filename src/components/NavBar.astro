---
const navLinks = [
  { href: "/", label: "Home" },
  { href: "/services", label: "Services" },
  { href: "/projects", label: "Projects" },
  { href: "/about", label: "About" },
  // { href: "/testimonials", label: "Testimonials" },
  { href: "/faq", label: "FAQ" },
  { href: "/contact", label: "Contact" },
];
---

<nav class="navbar mx-auto max-w-6xl px-4 py-3 relative z-50" aria-label="Primary">
  <div class="navbar-start">
    <a
      class="flex items-center gap-3 text-xl font-semibold tracking-tight"
      href="/"
      aria-label="TaylorMade Landscapes home"
    >
      <img
        src="/logo/Logo.png"
        alt="TaylorMade Landscapes logo"
        class="h-10 w-auto object-contain sm:h-14"
        style="max-width: 10rem;"
        width="200"
        height="40"
        loading="eager"
        decoding="async"
      />
    </a>
  </div>
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal gap-2">
      {
        navLinks.map((link) => (
          <li>
            <a
              class="px-3 py-2 font-medium text-base-content/80 hover:text-base-content hover:bg-base-200 rounded-lg transition-all duration-200"
              href={link.href}
            >
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
  <div class="navbar-end gap-2">
    <a
      class="btn btn-primary hidden lg:inline-flex hover:shadow-xl"
      href="/contact">Request a quote</a
    >
    <details class="dropdown dropdown-end lg:hidden" data-mobile-nav>
      <summary
        class="btn btn-ghost btn-circle"
        aria-label="Open navigation menu"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </summary>
      <ul
        class="menu dropdown-content mt-3 w-52 rounded-box bg-base-100 p-2 shadow"
        style="z-index: 9999;"
      >
        {
          navLinks.map((link) => (
            <li>
              <a
                class="px-3 py-2 font-medium text-base-content/80 hover:text-base-content hover:bg-base-200 rounded-lg transition-all duration-200"
                href={link.href}
              >
                {link.label}
              </a>
            </li>
          ))
        }
        <li class="mt-2">
          <a class="btn btn-primary" href="/contact">Request a quote</a>
        </li>
      </ul>
    </details>
  </div>
</nav>

<script is:inline>
  if (typeof document !== "undefined") {
    const navDropdown = document.querySelector("[data-mobile-nav]");

    if (navDropdown) {
      const handleDocumentClick = (event) => {
        if (!navDropdown.hasAttribute("open")) return;
        if (
          event.target instanceof Node &&
          !navDropdown.contains(event.target)
        ) {
          navDropdown.removeAttribute("open");
        }
      };

      const handleKeydown = (event) => {
        if (event.key === "Escape") {
          navDropdown.removeAttribute("open");
        }
      };

      document.addEventListener("click", handleDocumentClick);
      document.addEventListener("keydown", handleKeydown);

      window.addEventListener("astro:after-swap", () => {
        document.removeEventListener("click", handleDocumentClick);
        document.removeEventListener("keydown", handleKeydown);
      });
    }
  }
</script>
