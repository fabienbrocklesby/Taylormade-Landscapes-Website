---
interface Props {
  limit?: number;
  showFilters?: boolean;
}

const { limit, showFilters = false } = Astro.props as Props;

const projects = [
  {
    title: "Mapua driveway makeover",
    location: "Mapua",
    description:
      "Retaining walls, and layered planters soften the driveway entrance.",
    image: "/images/garden1.jpg",
    imageWebp: "/images/garden1.webp",
    alt: "Brick courtyard with new planting, potted trees, and a sheltered dining setting",
    category: "Makeovers",
  },
  {
    title: "Richmond new build family garden",
    location: "Richmond",
    description:
      "A full-site plan with evergreen screening, and low maintenance gardens to compliment the outdoor entertaining area.",
    image: "/images/garden2.jpg",
    imageWebp: "/images/garden2.webp",
    alt: "Freshly planted backyard with neat lawn strips and timber edging around new beds",
    category: "New builds",
  },
  {
    title: "Stoke courtyard",
    location: "Stoke",
    description:
      "Wind-tolerant planting, natural seating and retaining - keeping the space low-maintenance and an entertainers dream.",
    image: "/images/garden3.jpg",
    imageWebp: "/images/garden3.webp",
    alt: "Raised timber deck surrounded by native planting and gravel pathways near the coast",
    category: "Entertaining areas",
  },
  {
    title: "Richmond hillside terracing",
    location: "Richmond",
    description:
      "Layered retaining and planting for beautification, adding value to your property.",
    image: "/images/garden4.jpg",
    imageWebp: "/images/garden4.webp",
    alt: "Tiered hillside garden with stone steps, hedging, and outlook over Nelson",
    category: "Lawns & planting",
  },
  {
    title: "Outdoor living zone",
    location: "Redwood Valley",
    description:
      "A sunken entertainment area with generous planting pockets, lawn and lighting for long summer evenings.",
    image: "/images/garden5.jpg",
    imageWebp: "/images/garden5.webp",
    alt: "Finished backyard with manicured lawn, stepping pavers, and layered shrubs",
    category: "Entertaining areas",
  },
];

const displayedProjects =
  typeof limit === "number" ? projects.slice(0, limit) : projects;
const filters = [
  "All",
  "New builds",
  "Makeovers",
  "Entertaining areas",
  "Lawns & planting",
];
---

<section class="space-y-6">
  <div class="space-y-2">
    <p
      class="text-sm font-semibold uppercase tracking-wide text-base-content/70"
    >
      Projects
    </p>
    <h2 class="text-3xl font-bold tracking-tight">
      Recent landscapes across Nelson & Tasman
    </h2>
    <p class="max-w-3xl text-base-content/80">
      Every garden is designed for how people actually live in the space-morning
      coffees, messy kids, coastal winds, and everything in between.
    </p>
  </div>
  {
    showFilters && (
      <div class="tabs tabs-boxed w-full max-w-3xl">
        {filters.map((filter) => (
          <a class={`tab ${filter === "All" ? "tab-active" : ""}`}>{filter}</a>
        ))}
      </div>
    )
  }
  <div class="grid gap-6 md:grid-cols-2">
    {
      displayedProjects.map((project) => (
        <article class="card border border-base-300 bg-base-100 shadow-sm">
          <figure class="aspect-4/3 overflow-hidden">
            <picture>
              <source srcset={project.imageWebp} type="image/webp" />
              <img
                src={project.image}
                alt={project.alt}
                class="h-full w-full object-cover"
                loading="lazy"
                decoding="async"
              />
            </picture>
          </figure>
          <div class="card-body">
            <div class="flex items-center gap-2 text-sm text-base-content/70">
              <span class="badge badge-outline">{project.category}</span>
              <span>{project.location}</span>
            </div>
            <h3 class="card-title text-xl">{project.title}</h3>
            <p class="text-base-content/80">{project.description}</p>
          </div>
        </article>
      ))
    }
  </div>
</section>
